# Сервис "Конвертер валют" для компании Aiti Guru.

<details>
<summary>

## Описание сервиса

</summary>
Backend приложение, которое позволяет конвертировать валюты из одной в другую по заданным параметрам. Необходимо передать название 1 и 2 валюты и сумму которую нужно конвертировать.

</details>

---
<details>
<summary>

## Технологии

</summary>

1) Django;
2) Docker;
3) Docker compose;
4) Nginx;
5) Postgres.

</details>

---


<details>
<summary>

## Описание функционала

</summary>
Сервис настроен так, чтобы его можно было расширять и наполнять новым функционалом. 

На данном этапе БД не используется, но уже добавлена в контейнер чтобы её можно было наполнять и взаимодействовать с
ней.

Кеширование используется внутреннее т.к. набор данных слишком мал, чтобы поднимать Redis.

Запрос курса валют реализован через сторонний сервис.

Подробно описана документация/Swagger.

Настроен и отработан отлов ошибок/возбуждение исключений, сообщения об ошибки информативны и понятны.

Архитектура проекта построена так что сервисы/вспомогательные или часто повторяющиеся функции/методы/классы
располагаются в отдельном файле, что не нагромождать код с представлениями и сериализаторами.
В будущем это может быть папкой с разделёнными на файлы.
Предусмотрена возможность написания в будущем API v2 v3 vn чтобы в будущем сервис мог уйти от старых версий и перейти на
новую без рисков сбоя у старых пользователей, грубо говоря механика плавного перехода.

В контейнеризацию добавлен nginx для статических файлов, на случай реализации моделей и админ панели, добавления
frontend в проект и docker compose.
</details>

---

## Запуск проекта

<details>

<summary>

### Первый способ, через Docker compose

</summary>

### 1. Клонирование репозиторий

```bash
git clone https://github.com/Hashtagich/Currency_converter.git
```

### 2. Установка переменных окружения

***В корне проекта заполняем файл example.db.env и переименовываем его в db.env или просто создаём файл db.env и
заполняем его***

```bash
POSTGRES_DB=Например, db
POSTGRES_USER=Например, db
POSTGRES_PASSWORD=Например, db
```

***В папке backend заполняем файл env.example и переименовываем его в .env или просто создаём файл .env и заполняем его
***

 ```bash
 SECRET_KEY='Ваш секретный ключ проекта'
 DEBUG=Булевое значение True или False
 ALLOWED_HOSTS='Разрешенные хосты'
 LANGUAGE_CODE='Язык, например, ru'
 TIME_ZONE='Временная зона, например, UTC'

BASE_URL = 'https://v6.exchangerate-api.com/v6' url сайта для получения курса валют
API_KEY = 'Токен пользователя для взаимодействия с сервисом по курсу валют, получаем после регистрации.'

 DB_NAME='Имя Базы данных (БД), например, db'
 DB_LOGIN='Логин БД, например, db'
 DB_PASS='Пароль БД, например, db'
 DB_HOST='Хост БД, например, db'
 DB_PORT='Порт БД, например, 5433'
 
 ```

### 3. Сборка и запуск контейнеров

```bash

docker-compose up --build -d

```

</details>

<details>

<summary>

### Второй способ, без использования Docker compose

</summary>

### 1. Клонируйте репозиторий:

```bash
git clone https://github.com/Hashtagich/Currency_converter.git
```

2. Запускаем backend

   2.1. Установите и активируйте виртуальное окружение:
    ```bash
    python -m venv venv
    venv/Scripts/activate  - для Windows
    venv/bin/activate - для Linux
    ```

   2.2 Перейдите в папку backend и установите зависимости:
    ```bash
    cd backend
    python -m pip install --upgrade pip
    pip install -r requirements.txt
    ```

   2.3 Находясь в папке backend создайте файл *.env* или заполните файл *env.example* и переименуйте его в *.env*:
     ```bash
     SECRET_KEY='Ваш секретный ключ проекта'
     DEBUG=Булевое значение True или False
     ALLOWED_HOSTS='Разрешенные хосты'
     LANGUAGE_CODE='Язык, например, ru'
     TIME_ZONE='Временная зона, например, UTC'
    
    BASE_URL = 'https://v6.exchangerate-api.com/v6' url сайта для получения курса валют
    API_KEY = 'Токен пользователя для взаимодействия с сервисом по курсу валют, получаем после регистрации.'
    
     DB_NAME='Имя Базы данных (БД), например, db'
     DB_LOGIN='Логин БД, например, db'
     DB_PASS='Пароль БД, например, db'
     DB_HOST='Хост БД, например, db'
     DB_PORT='Порт БД, например, 5433'
     
     ```

   2.3.1 В файле backend/backend/settings.py находим переменную DATABASES и заменяем на:
    ```bash
    DATABASES = {
     'default': {
         'ENGINE': 'django.db.backends.sqlite3',
         'NAME': BASE_DIR / 'db.sqlite3',
     },
    ```

   2.4 Находясь в папке backend выполните миграции:
    ```bash
    python manage.py makemigrations
    python manage.py migrate
    ```

   2.5 Находясь в папке backend запустите проект:
    ```bash
    python manage.py runserver
    ```

</details>

___

### Urls и API

***URL***

При запуске через Docker compose, например, http://127.0.0.1:8001 или http://localhost:8001

При запуске вторым способом, без Docker compose http://127.0.0.1:8000

***Административная панель***

<code>{{URL}}/admin/</code>

***Страница с документацией по API***

<code>{{URL}}/docs/</code>

***API Регистрация и логирование***
<details>
<summary><code>GET/api/rates/</code></summary>

*Конвертация валюты из одной в другую с указанием суммы. Возвращает конвертированную сумму. <br>Пример
запроса http://127.0.0.1:8000/api/rates/?from=USD&to=RUB&value=1*

```
{
  "result": 123.45
}
```

</details>

